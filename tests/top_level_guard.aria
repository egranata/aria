# SPDX-License-Identifier: Apache-2.0
import guard from aria.utils.guard;

struct Guard {
    type val COUNTER = 0;

    instance func guard_exit() {
        Guard.COUNTER = Guard.COUNTER + 1;
    }
}

val in_guard = guard(alloc(Guard)).do(|g| => {
    assert 3 == 3;
    return true;
});

func main() {
    assert Guard.COUNTER == 1;
    assert in_guard;
}
