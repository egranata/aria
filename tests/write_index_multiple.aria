# SPDX-License-Identifier: Apache-2.0
struct Foo {
    type func new(x) = alloc(This) { .x };

    operator []=(a,b,n) {
        this.x = this.x * a + b * n;
    }

    operator[](n) {
        return this.x - n;
    }
}

func main() {
    val f = Foo.new(5);
    assert f[0] == 5;

    f[3,4] = 5;
    assert f[1] == 34;
    assert f[0] == 35;
    f[2,0] = 10;
    assert f[0] == 70;
    assert f[10] == 60;
}
