# SPDX-License-Identifier: Apache-2.0
import Request from aria.network.request;
import * from aria.network.retry;

func main() {
    val request = Request.new("https://www.rust-lang.org/");
    val response = retry(|| => request.get(), |result| => result.status_code == 200);
    assert response.is_Pass();
    assert response.unwrap_Pass().headers["content-type"].contains("html");
    assert response.unwrap_Pass().content.contains("<html");
}
