# SPDX-License-Identifier: Apache-2.0
struct Shifter {
    type func new() {
        return alloc(This){
            .offset = 0,
        };
    }

    operator << (n: Int) {
        return alloc(Shifter) {
            .offset = this.offset - n,
        };
    }

    operator >> (n: Int) {
        return alloc(Shifter) {
            .offset = this.offset + n,
        };
    }
}

func main() {
    val s = Shifter.new();

    s = s << 1;
    assert s.offset == -1;

    s = s >> 6;
    assert s.offset == 5;

    s = s << 3;
    assert s.offset == 2;

    s = (s << 3) >> 4;
    assert s.offset == 3;

    s = s << 10;
    assert s.offset == -7;
}
